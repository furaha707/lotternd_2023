<? include "../include/head.html" ?>
<!DOCTYPE html>
<html lang="<?=$P_lang?>">
	<head>
		<?
    $P_dp1 = '2';
    $P_dp2 = '2';
    $P_dp3 = '1';
    include "../include/meta.html"
		?>
		<link rel="stylesheet" href="../../assets/css/research.min.css" />
	</head>
	<body class="sub-body">
		<!-- S : Header -->
		<? include "../include/header.html" ?>
		<!-- E : Header -->

		<!-- S : Sub visual -->
		<? include "../include/sub-visual.html" ?>
		<!-- E : Sub visual -->

		<!-- S : Sub navigation -->
		<? include "../include/sub-nav.html" ?>
		<!-- E : Sub navigation -->

		<!-- S : Main -->
		<main class="main" id="contents">
			<!-- S : 탭 메뉴 링크 -->
			<section class="section py-lg-20 py-10">
				<div class="container">
					<div class="tab common-tab" data-tab="false" data-tab-active="on" data-tab-index="0" data-tab-mode="js">
						<div class="tab-header mb-4" data-tab-header="">
							<div class="tab-item">
								<a href="<?=$nav_2_2_1_href?>" class="link on" data-tab-item=""><?=$nav_2_2_1?></a>
							</div>
							<div class="tab-item">
								<a href="<?=$nav_2_2_2_href?>#contents" class="link" data-tab-item=""><?=$nav_2_2_2?></a>
							</div>
						</div>
					</div>
				</div>
			</section>
			<!-- E : 탭 메뉴 링크 -->

			<!-- S : 본문 -->
			<section class="section pb-15 pb-lg-30">
				<div class="container">
					<p class="better-tit mb-15 wow fadeInUp">
						롯데중앙연구소의 노력 끝에 탄생한 Better Food를 소개합니다.<br />
						개발부터 출시까지, 그 이면에 숨겨진 생생한 이야기를 만나보세요.
					</p>

					<div class="table-info wow fadeInUp">
						<!-- S : 글 갯수 -->
						<p class="total-list">Total <span class="num">100</span></p>
						<!-- E : 글 갯수 -->

						<!-- S : 검색영역 -->
						<div class="board-search-01">
							<form method="POST" action="?" id="searchForm">
								<fieldset>
									<div class="select-bx">
										<p class="select-title">ALL</p>
										<div class="inner">
											<label><input type="checkbox" name="product" value="all" class="all-check" /><span>ALL</span></label>
											<label><input type="checkbox" name="product" value="snack" class="check" /><span>제과</span></label>
											<label><input type="checkbox" name="product" value="food" class="check" /><span>푸드</span></label>
											<label><input type="checkbox" name="product" value="drink" class="check" /><span>음료</span></label>
											<label><input type="checkbox" name="product" value="alcohol" class="check" /><span>주류</span></label>
										</div>
									</div>
									<input type="text" title="검색어" class="input-type-01" name="find_word" value="" placeholder="검색어를 입력하세요." />
									<input type="submit" value="" class="btn btn-color-01" />
								</fieldset>
							</form>
						</div>
						<!-- E : 검색영역 -->
					</div>

					<ul class="img_board_list row type_b type_food wow fadeInUp">
						<!-- S : 등록된 게시물이 없는 경우 노출 -->
						<!-- <li class="col-12 no_data">
							<img src="../../assets/images/sub/list-none.png" alt="게시물없음 " />
							<p>검색결과가 없습니다.</p>
						</li> -->
						<!-- E : 등록된 게시물이 없는 경우 노출 -->
						<li class="col-xs-6 col-sm-4 col-lg-4">
							<a href="./better__food-view.html">
								<!-- 이미지 권장사이즈 : 840*840 -->
								<div class="img_box">
									<img src="../../images/board/sample.jpg" alt="썸네일" />
									<div class="hover_box">
										<div class="arrow">
											<img src="../../assets/images/icon/link-arrow.png" alt="화살표" />
										</div>
									</div>
								</div>
								<div class="txt_box">
									<p class="tit">제목 노출</p>
								</div>
							</a>
						</li>
						<li class="col-xs-6 col-sm-4 col-lg-4">
							<a href="./better__food-view.html">
								<!-- 이미지 권장사이즈 : 840*840 -->
								<div class="img_box">
									<img src="../../images/board/sample.jpg" alt="썸네일" />
									<div class="hover_box">
										<div class="arrow">
											<img src="../../assets/images/icon/link-arrow.png" alt="화살표" />
										</div>
									</div>
								</div>
								<div class="txt_box">
									<p class="tit">제목 노출</p>
								</div>
							</a>
						</li>
						<li class="col-xs-6 col-sm-4 col-lg-4">
							<a href="./better__food-view.html">
								<!-- 이미지 권장사이즈 : 840*840 -->
								<div class="img_box">
									<img src="../../images/board/sample.jpg" alt="썸네일" />
									<div class="hover_box">
										<div class="arrow">
											<img src="../../assets/images/icon/link-arrow.png" alt="화살표" />
										</div>
									</div>
								</div>
								<div class="txt_box">
									<p class="tit">제목 노출</p>
								</div>
							</a>
						</li>
					</ul>

					<!-- S : 페이징 -->
					<div class="paging-area">
						<ul>
							<li>
								<a href="javascript:;" class="prev-first"><span>맨앞으로</span></a>
							</li>
							<li>
								<a href="javascript:;" class="prev"><span>이전으로</span></a>
							</li>
							<li>
								<a href="javascript:;" class="active">1<span></span></a>
							</li>
							<li>
								<a href="javascript:;">2<span></span></a>
							</li>
							<li>
								<a href="javascript:;">3<span></span></a>
							</li>
							<li>
								<a href="javascript:;">4<span></span></a>
							</li>
							<li>
								<a href="javascript:;">5<span></span></a>
							</li>
							<li>
								<a href="javascript:;" class="next"><span>다음으로</span></a>
							</li>
							<li>
								<a href="javascript:;" class="next-last"><span>맨뒤로</span></a>
							</li>
						</ul>
					</div>
					<!-- E : 페이징 -->
				</div>
			</section>
			<!-- E : 본문 -->
		</main>
		<!-- E : Main -->

		<? include "../include/footer.html" ?>
		<? include "../include/js.html" ?>
		<script>
			const selectTit = document.querySelector('.select-title');
			const selectOpt = document.querySelector('.select-bx .inner');
			const optList = document.querySelectorAll('input[name="product"]');
			const defaultList = ['제과', '푸드', '음료', '주류'];
			let listArray = [];

			// 리스트 보이기
			function Showoption() {
				selectTit.classList.toggle('on');
				selectOpt.classList.toggle('active');
			}

			selectTit.addEventListener('click', Showoption);

			// 리스트 클릭에 따라 추가 및 삭제
			optList.forEach(function (item) {
				item.addEventListener('change', function (e) {
					let optText = e.target.parentElement.innerText;
					let state = $(this).prop('checked');
					if (e.target.className === 'all-check') {
						state ? $('.check').prop('checked', true) : $('.check').prop('checked', false);

						if (e.target.checked) {
							listArray = defaultList;
							selectTit.textContent = 'ALL';
							console.log(listArray);
						} else {
							listArray = [];
							selectTit.textContent = 'ALL';
							console.log(listArray);
						}
					} else {
						if (e.target.checked) {
							if (!listArray.includes(item)) {
								listArray.push(optText);
								selectTit.textContent = listArray;
								console.log(listArray);
							}
						} else {
							listArray = listArray.filter((element) => element !== optText);
							if (listArray.length > 0) {
								selectTit.textContent = listArray;
							} else {
								selectTit.textContent = 'ALL';
							}
							console.log(listArray);
						}
					}

					$('.check').each(function (index, elem) {
						state = $(this).prop('checked'); /* 변수에 체크박스 true/false 저장 */
						if (state) {
							state = true;
						} else {
							state = false;
							// selectTit.textContent = '검색';
							return false; /* state가 false인 경우 반복문 중단 */
						}
					});

					/* 개별 체크박스 체크 상태값에 따라 전체 체크에도 활성/비활성 */
					if (state) {
						$('.all-check').prop('checked', true);
					} else {
						$('.all-check').prop('checked', false);
					}
				});
			});

			$('body').on('click', function (e) {
				var $tgPoint = $(e.target);
				var $Formarea = $tgPoint.offsetParent('select-bx');

				console.log($tgPoint.offsetParent());

				if (!$Formarea) {
					selectOpt.removeClass('active');
				}
			});
		</script>
	</body>
</html>
