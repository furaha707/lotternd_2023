<? include "../include/head.html" ?>
<!DOCTYPE html>
<html lang="<?=$P_lang?>">
	<head>
		<?
    $P_dp1 = '2';
    $P_dp2 = '2';
    $P_dp3 = '1';
    include "../include/meta.html"
		?>
		<link rel="stylesheet" href="../../assets/css/research.min.css" />
	</head>
	<body class="sub-body">
		<!-- S : Header -->
		<? include "../include/header.html" ?>
		<!-- E : Header -->

		<!-- S : Sub visual -->
		<? include "../include/sub-visual.html" ?>
		<!-- E : Sub visual -->

		<!-- S : Sub navigation -->
		<? include "../include/sub-nav.html" ?>
		<!-- E : Sub navigation -->

		<!-- S : Main -->
		<main class="main" id="contents">
			<!-- S : 탭 메뉴 링크 -->
			<section class="section py-lg-20 py-10">
				<div class="container">
					<div class="tab common-tab" data-tab="false" data-tab-active="on" data-tab-index="0" data-tab-mode="js">
						<div class="tab-header mb-4" data-tab-header="">
							<div class="tab-item">
								<a href="<?=$nav_2_2_1_href?>" class="link on" data-tab-item=""><?=$nav_2_2_1?></a>
							</div>
							<div class="tab-item">
								<a href="<?=$nav_2_2_2_href?>" class="link" data-tab-item=""><?=$nav_2_2_2?></a>
							</div>
						</div>
					</div>
			<!-- E : 탭 메뉴 링크 -->

					<p class="better-food__title">
						제목 영역입니다
					</p>
					<!-- 개발 시, .board-box 와 .mb-10 을 제외한 나머지 클래스들은 삭제해주세요! -->
					<div class="board-box mb-10 py-20 text-center bg-light">
						에디터 영역입니다.
					</div>

			<!-- S : 본문 -->
					<div class="border-list-type mt_30">
						<ul>
							<li>
								<a href="#" title="이전">
									<div class="left clearfix">
										<div class="w-con">이전글 입니다. 이전글 입니다. 이전글 입니다. 이전글 입니다. 이전글 입니다. 이전글 입니다. 이전글 입니다.</div>
									</div>
								</a>
							</li>
							<!-- 글이 없을 경우에 .w-con 에 .none 클래스 붙일 것 -->
							<a href="./better__food.html" class="list-btn"><img src="../../assets/images/sub/list-btn.png" alt="목록으로" /></a>
							<li class="border-none">
								<a href="#" title="다음">
									<div class="right clearfix">
										<div class="w-con none">다음 글이 없습니다.</div>
									</div>
								</a>
							</li>
						</ul>
					</div>
			<!-- E : 본문 -->
				</div>
			</section>
		</main>
		<!-- E : Main -->

		<? include "../include/footer.html" ?>
		<? include "../include/js.html" ?>
		<script>
			const selectTit = document.querySelector('.select-title');
			const selectOpt = document.querySelector('.select-bx .inner');
			const optList = document.querySelectorAll('input[name="product"]');
			const defaultList = ['제과', '푸드', '음료', '주류'];
			let listArray = [];

			// 리스트 보이기
			function Showoption() {
				selectTit.classList.toggle('on');
				selectOpt.classList.toggle('active');
			}

			selectTit.addEventListener('click', Showoption);

			// 리스트 클릭에 따라 추가 및 삭제
			optList.forEach(function (item) {
				item.addEventListener('change', function (e) {
					let optText = e.target.parentElement.innerText;
					let state = $(this).prop('checked');
					if (e.target.className === 'all-check') {
						state ? $('.check').prop('checked', true) : $('.check').prop('checked', false);

						if (e.target.checked) {
							listArray = defaultList;
							selectTit.textContent = 'ALL';
							console.log(listArray);
						} else {
							listArray = [];
							selectTit.textContent = 'ALL';
							console.log(listArray);
						}
					} else {
						if (e.target.checked) {
							if (!listArray.includes(item)) {
								listArray.push(optText);
								selectTit.textContent = listArray;
								console.log(listArray);
							}
						} else {
							listArray = listArray.filter((element) => element !== optText);
							if (listArray.length > 0) {
								selectTit.textContent = listArray;
							} else {
								selectTit.textContent = 'ALL';
							}
							console.log(listArray);
						}
					}

					$('.check').each(function (index, elem) {
						state = $(this).prop('checked'); /* 변수에 체크박스 true/false 저장 */
						if (state) {
							state = true;
						} else {
							state = false;
							// selectTit.textContent = '검색';
							return false; /* state가 false인 경우 반복문 중단 */
						}
					});

					/* 개별 체크박스 체크 상태값에 따라 전체 체크에도 활성/비활성 */
					if (state) {
						$('.all-check').prop('checked', true);
					} else {
						$('.all-check').prop('checked', false);
					}
				});
			});

			$('body').on('click', function (e) {
				var $tgPoint = $(e.target);
				var $Formarea = $tgPoint.offsetParent('select-bx');

				console.log($tgPoint.offsetParent());

				if (!$Formarea) {
					selectOpt.removeClass('active');
				}
			});
		</script>
	</body>
</html>
